(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{6079:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var n=t(7876),i=t(4232),a=t(553),o=t(9099),l=t(8113);function d(){let{data:e,status:r}=(0,a.useSession)(),t=(0,o.useRouter)(),[d,s]=(0,i.useState)(""),[c,u]=(0,i.useState)(null),[p,h]=(0,i.useState)(!1),[g,f]=(0,i.useState)(null);i.useEffect(()=>{"loading"!==r&&(e||t.replace("/user/signin?callbackUrl=/url/create"))},[e,r,t]);let x=async e=>{e.preventDefault(),h(!0),f(null),u(null);try{let e=await fetch("/api/shorter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({original:d})}),r=await e.json();e.ok?(u(r.shorter||""),s("")):f(r.error||"Failed to create short URL")}catch(e){f("Network error. Please try again.")}finally{h(!1)}},y=async()=>{if(c)try{await navigator.clipboard.writeText(c),alert("URL copied to clipboard!")}catch(e){console.error("Failed to copy to clipboard:",e)}};return"loading"===r?(0,n.jsx)(l.default,{children:(0,n.jsx)("div",{children:"Checking authentication..."})}):e?(0,n.jsx)(l.default,{children:(0,n.jsxs)("div",{style:{maxWidth:400,margin:"2rem auto",padding:24,border:"1px solid #eee",borderRadius:8},children:[(0,n.jsx)("h2",{children:"Create Short URL"}),(0,n.jsxs)("form",{onSubmit:x,children:[(0,n.jsx)("input",{type:"url",placeholder:"Enter original URL",value:d,onChange:e=>s(e.target.value),required:!0,style:{width:"100%",padding:8,marginBottom:12}}),(0,n.jsx)("button",{type:"submit",disabled:p,style:{width:"100%",padding:8},children:p?"Creating...":"Create Short URL"})]}),c&&(0,n.jsxs)("div",{style:{marginTop:16,padding:12,borderRadius:4},children:[(0,n.jsx)("strong",{children:"Short URL:"}),(0,n.jsx)("div",{style:{marginTop:8},children:(0,n.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",style:{color:"#2196F3"},children:c})}),(0,n.jsx)("button",{onClick:y,style:{marginTop:8,background:"#4CAF50",color:"#fff",border:"none",padding:"4px 8px",borderRadius:4,cursor:"pointer"},children:"Copy URL"})]}),g&&(0,n.jsx)("div",{style:{marginTop:16,padding:12,backgroundColor:"#ffebee",borderRadius:4,color:"#d32f2f"},children:g})]})}):null}},6964:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/url/create",function(){return t(6079)}])},8113:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var n=t(7876);t(4232);var i=t(553),a=t(8230),o=t.n(a);function l(e){let{children:r}=e;return(0,n.jsxs)("div",{style:{padding:20,fontFamily:"Arial, sans-serif"},children:[(0,n.jsxs)("header",{style:{marginBottom:20,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsx)(o(),{href:"/",style:{margin:0},children:"NknightA pages"}),(0,n.jsx)("button",{onClick:()=>(0,i.signOut)(),style:{background:"#f44336",color:"#fff",border:"none",padding:"8px 16px",borderRadius:4,cursor:"pointer"},children:"Logout"})]}),(0,n.jsx)("main",{children:r}),(0,n.jsx)("footer",{style:{marginTop:20,borderTop:"1px solid #ccc",paddingTop:10},children:(0,n.jsx)("p",{children:"\xa9 2021 Nknight AMAMIYA@nknigha.me"})})]})}},9099:(e,r,t)=>{e.exports=t(6296)}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=6964)),_N_E=e.O()}]);